const party=function(){function t(){return Math.random()}function n(n,i){return o(n,i,t())}function o(t,n,o){return(1-o)*t+o*n}function i(t,o){return t*n(1-o/2,1+o/2)}function e(t,o){return t+n(-o/2,o/2)}function r(t,n,o){let i,e,r;if(t/=360,n/=100,o/=100,0===n)i=e=r=o;else{const a=(t,n,o)=>(o<0&&(o+=1),o>1&&(o-=1),o<1/6?t+6*(n-t)*o:o<.5?n:o<2/3?t+(n-t)*(2/3-o)*6:t),l=o<.5?o*(1+n):o+n-o*n,c=2*o-l;i=a(c,l,t+1/3),e=a(c,l,t),r=a(c,l,t-1/3)}const a=t=>{const n=Math.round(255*t).toString(16);return 1===n.length?"0"+n:n};return`#${a(i)}${a(e)}${a(r)}`}function a(t,n,i){function e(t){return t.toString(16)}function r(t){return parseInt(t,16)}i=null!=i?i:.5;for(var a="#",l=1;l<=5;l+=2){for(var c=r(t.substr(l,2)),s=r(n.substr(l,2)),u=e(Math.floor(o(c,s,i)));u.length<2;)u="0"+u;a+=u}return a}function l(t){return Math.abs(Math.cos(t.rotation.x)*Math.cos(t.rotation.y))}function c(t,n,o){return t&&null!=t[n]?t[n]:o}function s(t,n,o){t&&null==t[n]&&(t[n]=o)}function u(t,n){for(var o in n)n.hasOwnProperty(o)&&s(t,o,n[o])}function h(n,o,s){let u=i(c(s,"count",1),c(s,"countVariation",0)),h=c(s,"angleSpan",0),f=c(s,"rotationVelocityLimit",0),p=c(s,"scaleVariation",0);for(let y=0;y<u;y++){let u=e(0,h)*z,y=i(c(s,"yVelocity",0),c(s,"yVelocityVariation",0)),V=i(c(s,"width",5),p);d({acceleration:g(m(0,c(s,"gravity",!0)*w.gravityPixels),m()),velocity:g(m(Math.sin(u)*y,Math.cos(u)*y),m.generate(()=>f*t())),transform:g(m((n.left||0)+i((n.width||0)/2,2*c(s,"randomizePosition",!0))+(o?window.scrollX:0),(n.top||0)+i((n.height||0)/2,2*c(s,"randomizePosition",!0))+(o?window.scrollY:0)),m.generate(()=>Math.PI*c(s,"randomizeRotation",!0)*t()),m(V,V*c(s,"heightFactor",3))),color:c(s,"color",c(s,"colorFunction",()=>r(360*t(),100,70))()),lifetime:0,draw:function(){x.fillStyle=w.applyLighting?a("#000000",this.color,.25+.75*l(this.transform)):this.color;const t=.2;let n=this.lifetime>t?1:this.lifetime/t;v.quad.applyTransform(g(0,0,m.one.scale(n))).applyTransform(this.transform).draw(x)},update:function(t){this.velocity=this.velocity.applyDelta(this.acceleration,t),this.transform=this.transform.applyDelta(this.velocity,t),this.lifetime+=t}})}}function d(t){for(;M.length>=w.maxParticles;)M.shift();M.push(t)}function f(t){M.forEach(n=>n.update(t));let n=Math.max(document.documentElement.offsetHeight,window.innerHeight);M=M.filter(t=>t.transform.position.y<=n)}function p(){x.canvas.width=window.innerWidth,x.canvas.height=window.innerHeight,x.clearRect(0,0,x.canvas.width,x.canvas.height),M.forEach(t=>t.draw())}function y(t){let n=(t-P)/1e3;M.length>0&&(f(n),p()),P=t,window.requestAnimationFrame(y)}const w={maxParticles:1e3,gravityPixels:800,applyLighting:!0},m=function(t,n,o){return{x:t||0,y:n||0,z:o||0,add:function(t){return null==t.x||null==t.y||null==t.z?console.error("Invalid vector supplied to add operation."):m(this.x+t.x,this.y+t.y,this.z+t.z)},scale:function(t){return"number"!=typeof t?console.error("Invalid scale supplied to scale operation."):m(this.x*t,this.y*t,this.z*t)}}};m.one=m(1,1,1),m.generate=function(t){return"function"!=typeof t?console.error("Invalid factory function for generated vector."):m(t(),t(),t())};const g=function(t,n,o){return{position:t||m(),rotation:n||m(),scale:o||m(),applyDelta:function(t,n){return"number"!=typeof n?console.error("Invalid delta supplied to transform."):g(this.position.add(t.position.scale(n)),this.rotation.add(t.rotation.scale(n)),this.scale.add(t.scale.scale(n)))}}},v=function(t){return Array.isArray(t)?{points:t,applyTransform:function(t){return new v(this.points.map(n=>{let o=n.x*t.scale.x,i=n.y*t.scale.y;return m(t.position.x+(o*Math.cos(t.rotation.z)-i*Math.sin(t.rotation.z))*Math.cos(t.rotation.y),t.position.y+(o*Math.sin(t.rotation.z)+i*Math.cos(t.rotation.z))*Math.cos(t.rotation.x))}))},draw:function(t){x.beginPath();for(let n=0;n<this.points.length;n++){let o=this.points[n].x-window.scrollX,i=this.points[n].y-window.scrollY;(0==n?t.moveTo:t.lineTo).apply(t,[o,i])}x.closePath(),x.fill()}}:console.error("Invalid points definition.")};v.quad=v([m(-.5,.5),m(.5,.5),m(.5,-.5),m(-.5,-.5)]);const V=document.createElement("canvas");V.id="party-js-canvas",V.style="position: fixed; left: 0; top: 0; pointer-events: none;";const x=V.getContext("2d");document.body?document.body.appendChild(V):window.addEventListener("load",()=>document.body.appendChild(V));var M=[];Math.PI;const z=Math.PI/180;var P=0;return window.requestAnimationFrame(y),{element:function(t,n){n=n||{},u(n,{count:40,countVariation:.5,angleSpan:80,yVelocity:-300,yVelocityVariation:1,rotationVelocityLimit:6,scaleVariation:.8}),h(t.getBoundingClientRect(),!0,n)},position:function(t,n,o){o=o||{},u(o,{count:40,countVariation:.5,angleSpan:80,yVelocity:-300,yVelocityVariation:1,rotationVelocityLimit:6,scaleVariation:.8});let i={left:t,top:n};h(i,!0,o)},cursor:function(t){let n=window.event;if(null==n.clientX||null==n.clientY)return console.error("Calling 'party.cursor()' with no current mouse event is not allowed.");this.position(window.event.clientX,window.event.clientY,t)},screen:function(t){t=t||{},u(t,{count:window.innerWidth/1980*500,countVariation:.5,angleSpan:0,yVelocity:-100,yVelocityVariation:2,rotationVelocityLimit:6,scaleVariation:.8});let n={width:window.innerWidth,height:-window.innerHeight};h(n,!0,t)}}}();